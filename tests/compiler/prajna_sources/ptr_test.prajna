

@test
func TestMain(){
    var p: Ptr<i64>;
    p._ToInt64();

    test::Assert(p._ToInt64() == 0i64);
    // test::Assert(p == Ptr<i64>::Null());
    test::Assert(p.IsNull());

    p = Ptr<i64>::New();
    test::Assert(!p.IsNull());
}

@test
func TestLocal() {
    var p: Ptr<i64>;
    p._ToInt64();

    test::Assert(p._ToInt64() == 0i64);
    test::Assert(p.IsNull());
    {
       var p1 = Ptr<i64>::New();
       test::Assert(!p1.IsNull());
       p = p1;
    }
    test::Assert(!p.IsNull());
}

@test
func TestIndex() {
    var p = Ptr<i64>::Allocate(10);
    p[9] = 10;
    test::Assert(p[9] == 10);
}


@test
func TestNested() {
    var p = Ptr<Ptr<i64>>::New();
}
